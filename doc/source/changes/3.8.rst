v3.8
====

misc
----

* Add ``urxvt-unicode-256color`` as a possible value for ``$TERM`` when
  trying to figure out whether color output should be enabled
* Support creating worktrees in accentuated file paths

qibuild
-------

* Unify build configs: now a build config has a name, a toolchain and a list
  of profiles. A build dir matches exactly one build config. Build directories
  are the same when building in release or in debug.

  To do the transition, you should create at least one config per toolchain,
  for instance:

  .. code-block:: console

     qibuild add-config nao --toolchain atom --profile nao

  Then use

  .. code-block:: console

     qibuild configure -c nao

  As a consequence, the ``-p, --profile`` option is gone, and
  ``--release`` can only be used for ``qibuild configure``

* Add ``qibuild add-config``, ``qibuild list-configs``, ``qibuild rm-config``

* ``qibuild clean``: fix when using remote profiles
* ``qibuild init``: honor ``-w, --worktree`` option
* Re-implement setting custom build directory. To use this feature, write something
  like:

  .. code-block:: xml

    <qibuild>
      <build build-dir="my-build" />
    </qibuild>

  in ``/path/to/worktree/.qi/qibuild.xml``
* ``qibuild find``: fix return code when no CMake module is found
* Fix using ``-j`` with ``Visual Studio`` generators.
* Include toolchain paths in path.conf
* ``qibuild``: generate ``qitest.json`` file also after building
* Store default config for worktree in the global config file
  (``~/.config/qi/qibuild.xml``)



qidoc
------

* Implement ``qidoc build --spellcheck``, using
  `sphinxcontrib-spelling <http://sphinxcontrib-spelling.readthedocs.org/>`_

qilinguist
-----------

* Fail when non-translated messages are found
  (``qilinguist release`` learned ``--allow-untranslated-messages`` to get back
  the old behavior)
* ``qilinguist release`` can also work with ``.pml`` files.
* ``qilinguist list``: sort by project name

qipkg
-----

* ``qipkg deploy-package``: Remove previous instance before installing
* Add ``qipkg bump-version``
* ``qipkg make-package /path/to/pml``: also works when not in a worktree
* ``qipkg make-package``: handle translations files from ``.pml``
* Make it possible to use ``qipkg`` without a worktree

qipy
----

* Raise when empty projects are found

qisrc
------

* ``qisrc rebase``: several fixes

  * Only work on forked projects
  * Fix computation of git status before trying the rebase
  * Prettier output

* ``qisrc create``: better handling of ``"/"`` in argument
* ``qisrc grep``: fix using git grep options such as
  ``qisrc grep -- -i foo``
* ``qisrc sync``: fix retcode when some projects are skipped
* Implements ``qisrc sync --reset``

* ``qisrc create``: add ``-i,--template-path`` argument. This
  allows users to create their own templates

qitest
------

* Implement ``qitest run --break-on-failure``
* Fix error messages in some corner cases
* Fix several race conditions when using ``-j``

qitoolchain
-----------

* No longer writes files in ``~/.cache/qi/toolchains``
* Also remove package files when a package is removed from the feed
* ``qitoolchain add-package``: support legacy format

cmake
------

* modules:

  * ``ogre``: search in the right ``PATH_SUFFIX``
  * Add ``v4l``
  * Add ``Qt5X11Extras``
  * Support ``opencv`` 2.4.10

* ``qi_swig_wrap_python``: handle lower case DEPENDS arguments
* ``qi_install_python``: fix default destination on Windows
